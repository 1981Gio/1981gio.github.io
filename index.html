<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GiOrders Pro</title>

<style>

body{
font-family:-apple-system,BlinkMacSystemFont;
background:#f2f2f7;
margin:0;
padding:0;
}

.card{
background:white;
margin:15px;
padding:20px;
border-radius:18px;
box-shadow:0 6px 18px rgba(0,0,0,.05);
}

h2{
margin-top:0;
text-align:center;
}

input,select{
width:100%;
padding:8px;
border-radius:10px;
border:1px solid #d1d1d6;
font-size:15px;
}

select{
width:80px;
padding:4px;
font-size:14px;
}

.sizeRow{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:8px;
}

.centerName{
text-align:center;
font-weight:600;
margin-bottom:15px;
}

button{
padding:8px 14px;
border:none;
border-radius:10px;
font-size:14px;
cursor:pointer;
}

.primary{background:#0A84FF;color:white}
.gray{background:#d1d1d6}
.red{background:#ff3b30;color:white}
.green{color:#34c759;font-weight:600}
.unpaid{color:#ff3b30;font-weight:600}

/* SWITCH iOS */
.switch{
position:relative;
display:inline-block;
width:46px;
height:26px;
}

.switch input{
opacity:0;
width:0;
height:0;
}

.slider{
position:absolute;
cursor:pointer;
top:0;
left:0;
right:0;
bottom:0;
background-color:#ccc;
transition:.3s;
border-radius:34px;
}

.slider:before{
position:absolute;
content:"";
height:20px;
width:20px;
left:3px;
bottom:3px;
background:white;
transition:.3s;
border-radius:50%;
}

input:checked + .slider{
background:#34c759;
}

input:checked + .slider:before{
transform:translateX(20px);
}

.orderBox{
border-top:1px solid #e5e5ea;
padding-top:12px;
margin-top:12px;
}

.orderTop{
display:flex;
justify-content:space-between;
font-weight:600;
}

.orderBottom{
display:flex;
justify-content:space-between;
font-size:14px;
margin-top:3px;
}

</style>
</head>

<body>

<div class="card">
<h2 id="eventTitle">Evento</h2>

<input id="name" placeholder="Nome">

<div id="sizes"></div>

<div style="display:flex;justify-content:center;margin-top:10px;gap:8px">
<label class="switch">
<input type="checkbox" id="paid">
<span class="slider"></span>
</label>
</div>

<div style="display:flex;justify-content:center;margin-top:15px;gap:10px">
<button class="primary" onclick="saveOrder()">Salva</button>
<button class="gray" onclick="clearForm()">Annulla</button>
</div>
</div>


<div class="card">
<h2>Ordini</h2>
<div id="orders"></div>
</div>


<script>

let eventData={
name:"T-shirt Rex",
price:6,
orders:[]
};

document.getElementById("eventTitle").innerText=
eventData.name+" - €"+eventData.price;

renderSizes();
renderOrders();

function renderSizes(){
let sizes=["XS","S","M","L","XL","XXL"];
let html="";
sizes.forEach(s=>{
html+=`
<div class="sizeRow">
<div>${s}</div>
<select id="q_${s}">
${[0,1,2,3,4,5,6,7,8,9,10]
.map(n=>`<option>${n}</option>`).join("")}
</select>
</div>`;
});
document.getElementById("sizes").innerHTML=html;
}

function saveOrder(){
let name=document.getElementById("name").value.trim();
if(!name) return;

let sizes=["XS","S","M","L","XL","XXL"];
let sizeData={};
let totalQty=0;

sizes.forEach(s=>{
let val=parseInt(document.getElementById("q_"+s).value);
if(val>0){
sizeData[s]=val;
totalQty+=val;
}
});

if(totalQty===0) return;

let paid=document.getElementById("paid").checked;

let total=totalQty*eventData.price;

eventData.orders.push({
name,
sizes:sizeData,
total,
paid
});

clearForm();
renderOrders();
}

function clearForm(){
document.getElementById("name").value="";
document.getElementById("paid").checked=false;
["XS","S","M","L","XL","XXL"]
.forEach(s=>{
document.getElementById("q_"+s).value=0;
});
}

function renderOrders(){
let container=document.getElementById("orders");
container.innerHTML="";

if(eventData.orders.length===0){
container.innerHTML="<div>Nessun ordine</div>";
return;
}

eventData.orders.forEach(o=>{
let sizeString=Object.entries(o.sizes)
.map(([k,v])=>v+" "+k)
.join(" - ");

container.innerHTML+=`
<div class="orderBox">
<div class="orderTop">
<div>${o.name}</div>
<div>€ ${o.total}</div>
</div>
<div class="orderBottom">
<div>${sizeString}</div>
<div class="${o.paid?'green':'unpaid'}">
${o.paid?'PAGATO':'NON PAGATO'}
</div>
</div>
</div>
`;
});
}

</script>

</body>
</html>
