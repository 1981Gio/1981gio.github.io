<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>GiOrders</title>
<meta name="apple-mobile-web-app-title" content="GiOrders">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<!-- ICONA -->
<link rel="apple-touch-icon" href="1FFB8DDC-1EC1-4569-971E-598213CC5587.png">

<style>
html, body {
  margin:0;
  padding:0;
  font-family:-apple-system, sans-serif;
  background:#f2f2f7;
  -webkit-user-select:none;
  -webkit-tap-highlight-color:transparent;
}

h1 {
  text-align:center;
  color:#0A84FF;
}

.card {
  background:white;
  padding:15px;
  margin:15px;
  border-radius:14px;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
}

button {
  padding:8px 12px;
  border:none;
  border-radius:8px;
  margin-top:5px;
}

.primary { background:#0A84FF; color:white; }
.red { background:#ff3b30; color:white; }
.green { background:#34c759; color:white; }

select, input {
  width:100%;
  padding:8px;
  margin-top:6px;
  border-radius:8px;
  border:1px solid #ddd;
}

.order-line {
  font-size:14px;
  padding:6px 0;
  border-bottom:1px solid #eee;
}

@media print {
  button { display:none; }
}
</style>
</head>

<body>

<h1>GiOrders</h1>

<div class="card">
<h3>Nuovo Ordine</h3>

<input id="nome" placeholder="Nome persona">

<select id="taglia">
<option>S</option>
<option>M</option>
<option>L</option>
<option>XL</option>
<option>XXL</option>
</select>

<select id="quantita">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="10">10</option>
<option value="20">20</option>
</select>

<input id="prezzo" type="number" placeholder="Prezzo maglia" value="20">

<select id="pagato">
<option value="no">Non pagato</option>
<option value="si">Pagato</option>
</select>

<button class="primary" onclick="aggiungi()">Aggiungi</button>
</div>

<div class="card">
<h3>Elenco Ordini</h3>
<div id="lista"></div>
</div>

<div class="card">
<h3>Totale</h3>
<div id="totale"></div>
<button class="green" onclick="window.print()">Stampa</button>
</div>

<script>
let ordini = JSON.parse(localStorage.getItem("ordini")) || [];

function salva() {
  localStorage.setItem("ordini", JSON.stringify(ordini));
}

function aggiungi() {
  let nome = document.getElementById("nome").value;
  let taglia = document.getElementById("taglia").value;
  let quantita = parseInt(document.getElementById("quantita").value);
  let prezzo = parseFloat(document.getElementById("prezzo").value);
  let pagato = document.getElementById("pagato").value;

  if(!nome) return;

  ordini.push({nome, taglia, quantita, prezzo, pagato});
  salva();
  render();
}

function elimina(index) {
  ordini.splice(index,1);
  salva();
  render();
}

function render() {
  let lista = document.getElementById("lista");
  let totaleDiv = document.getElementById("totale");

  lista.innerHTML="";
  let totale=0;

  ordini.forEach((o,i)=>{
    totale += o.quantita * o.prezzo;

    lista.innerHTML += `
      <div class="order-line">
      ${o.nome} - ${o.taglia} x${o.quantita} - €${o.prezzo}
      (${o.pagato})
      <button class="red" onclick="elimina(${i})">X</button>
      </div>
    `;
  });

  totaleDiv.innerHTML = "Totale complessivo: €" + totale.toFixed(2);
}

render();
</script>

</body>
</html>
